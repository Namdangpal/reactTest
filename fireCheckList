| 번호 | 항목                                                 | 내용                                             |
| -- | -------------------------------------------------- | ---------------------------------------------- |
| 1  | **시설유형 + 시설종류 기준으로 월별 스케줄은 1개만 존재**                | 동일 시설유형·종류는 월별 기준일에 따라 단일 스케줄로 관리              |
| 2  | **점검대상항목별 주기(cycle_type)는 다르더라도 같은날이면 같은 스케줄에 포함** | 즉, 한 스케줄에 여러 주기(2W, 1M, 3M, 6M 등)가 함께 존재할 수 있음 |
| 3  | **점검월 내 미점검 항목은 이월 대상**                            | 이월 시 다음 가능한 스케줄에 병합됨                           |
| 4  | **스케줄 생성은 시설유형·종류·기준일·기준월에 따라 자동 생성**              | 동일 기준이면 여러 항목이 묶임                              |

소방시설점검 대상시설 기본구조
| 항목    | 설명                             |
| ----- | ------------------------------ |
| 시설 구조 | 건물 → 층 → 구역 → 시설               |
| 시설 분류 | 시설유형 + 시설종류                    |
| 점검 대상 | 시설 내 체크항목 (항목별 점검 주기 다를 수 있음)  |
| 점검 주기 | 월, 분기, 반기, 연 단위 (항목별 복합 주기 가능) |

스케쥴 생성규칙
| 항목      | 규칙                                  |
| ------- | ----------------------------------- |
| 기준일     | 동일 시설유형 + 시설종류는 하나의 기준일을 갖는다        |
| 기준월     | 기준일에 따라 주기별 기준월 계산                  |
| 스케줄 단위  | 시설유형 + 시설종류 + 기준월 단위                |
| 동일월 스케줄 | 같은 시설유형 + 시설종류는 월 단위로 **1건만 존재** 가능 |
| 스케줄 항목  | 주기가 달라도 동일 스케줄 내 **항목별로 병합**        |

점검주기 적용
| 항목    | 규칙                                |
| ----- | --------------------------------- |
| 월 주기  | 해당월 내 스케줄 생성                      |
| 분기 주기 | 해당 분기 내에 **1회만 스케줄 존재**           |
| 반기 주기 | 해당 반기 내 1회만 스케줄 존재                |
| 연 주기  | 해당 연도 내 1회만 스케줄 존재                |
| 주기 중복 | 같은날 스케줄은 하나로 통합, 항목별 주기 정보는 병합 관리 |


2. 주요 데이터 요소

시설정보 (FACILITY)

점검항목정보 (INSPECTION_ITEM)

점검주기 (CYCLE_BITMASK)

기준일 (BASE_DAY)

점검계획 (INSPECTION_PLAN)

점검이행결과 (INSPECTION_RESULT)

추가조치이력 (ACTION_HISTORY)

3. 자동생성 로직 흐름

1️⃣ 기준일(예: 매월 5일)에 배치 스케줄러 실행
2️⃣ 점검항목 테이블에서 점검주기별 항목 조회
3️⃣ 해당 월 주기에 맞는 항목 선별
4️⃣ 기존 일정과 중복되지 않으면 새 일정 생성
5️⃣ 미이행 일정은 상태 변경 또는 이월 처리
6️⃣ 휴일/주말 조정 후 최종 확정


🖼️ 4. 자동생성 시 고려사항

중복생성 방지 (ITEM_ID + PLAN_DATE 유니크)

기준일 변경 반영 및 재계산

점검주기 변경 시 향후 일정만 수정

미이행 일정 이월 정책 적용

휴일·주말 보정 처리

특정 시설 예외처리 (활성화 여부)

오류 로그 및 이력 관리

🖼️ 5. 운영 및 관리 항목

배치 스케줄러 주기 설정 (월 1회, 주 1회 등)

자동생성 결과 로그 기록 (성공/실패 건수)

관리자 검토 및 확정 프로세스

변경 이력 추적 (주기·기준일 변경)

예외처리 및 수동등록 기능 지원

🖼️ 6. 요약

✅ 데이터: 시설, 항목, 점검주기, 기준일
✅ 로직: 주기별 생성, 중복방지, 이월, 보정
✅ 배치: 스케줄링, 로그, 오류관리
✅ UI: 계획조회, 결과등록, 로그확인
✅ 관리: 변경이력, 예외처리, 승인 절차
